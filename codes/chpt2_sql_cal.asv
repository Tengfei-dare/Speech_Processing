% Basic speech processing with matlab
% Chapter 2

clear all;
close all;
clc;

% audio read
filename = "./chpt2_myRecording.wav";
[myAudio,Fs] = audioread(filename);
myAudio = myAudio / max(myAudio); % normalize
n_sample = length(myAudio);

% compute SPL
t_win = 30 / 1000; % 30ms
n_win = floor(t_win*Fs);
i_win = 1:n_win:n_sample-n_win;

spl = zeros(length(i_win),1);

for i = i_win
    
    spl(i) = spl_cal(myAudio(i:i+n_win));
    disp(spl(i));
end

plot(myAudio); hold on;
plot(i_win, spl);